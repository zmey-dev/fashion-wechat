<view class="page-container">
  <!-- Header Section -->
  <view class="header-section">
    <view class="header-top">
      <view class="brand-area">
        <text class="brand-title">Fashion</text>
        <text class="brand-subtitle">æ—¶è£…ç§€å¹³å°</text>
      </view>
      
      <view class="header-actions">
        <view class="action-btn" bindtap="onSearchTap">
          <text class="icon-search">ğŸ”</text>
        </view>
      </view>
    </view>
    
    <!-- Filter Navigation -->
    <view class="filter-nav">
      <view class="filter-list">
        <view 
          wx:for="{{filterOptions}}" 
          wx:key="key"
          class="filter-tab {{currentFilter === item.key ? 'active' : ''}}"
          data-filter="{{item.key}}"
          bindtap="onFilterTap"
        >
          <text class="filter-name">{{item.name}}</text>
          <view wx:if="{{currentFilter === item.key}}" class="filter-indicator"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- Main Content Area -->
  <view class="content-area">
    
    <!-- Posts Grid -->
    <view class="posts-grid">
      <view 
        wx:for="{{posts}}" 
        wx:key="id"
        class="post-card"
        data-post-id="{{item.id}}"
        data-index="{{index}}"
        bindtap="onPostTap"
      >
        <!-- Media Container -->
        <view class="media-container">
          <image 
            src="{{item.type === 'video' ? item.media[0].preview_url : item.media[0].url}}"
            class="post-image"
            mode="aspectFill"
            lazy-load="{{true}}"
          />
          
          <!-- Like Stats Overlay -->
          <view class="like-overlay">
            <view 
              class="like-action {{item.likes_exists ? 'liked' : ''}}"
              data-post-id="{{item.id}}"
              data-index="{{index}}"
              bindtap="onLikeTap"
            >
              <text class="heart-icon">{{item.likes_exists ? 'â¤ï¸' : 'ğŸ¤'}}</text>
              <text class="like-count">{{item.likes || 0}}</text>
            </view>
          </view>
        </view>

        <!-- User Info Only -->
        <view class="user-section">
          <view class="user-row" data-username="{{item.user.username}}" bindtap="onUserTap">
            <avatar 
              avatar="{{item.user.avatar}}" 
              name="{{item.user.username}}" 
              size="{{40}}"
            />
            <text class="user-name">{{item.user.username}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- Loading State -->
    <view wx:if="{{loading && posts.length === 0}}" class="loading-state">
      <view class="loading-spinner"></view>
      <text class="loading-text">æ­£åœ¨åŠ è½½ç²¾å½©å†…å®¹...</text>
    </view>

    <!-- Empty State -->
    <view wx:if="{{!loading && posts.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“¸</text>
      <text class="empty-title">æš‚æ— å†…å®¹</text>
      <text class="empty-desc">å¿«æ¥å‘å¸ƒä½ çš„æ—¶å°šä½œå“å§</text>
      <button class="upload-btn" bindtap="onUploadTap">ç«‹å³å‘å¸ƒ</button>
    </view>

    <!-- Load More -->
    <view wx:if="{{loading && posts.length > 0}}" class="load-more">
      <view class="loading-spinner small"></view>
      <text class="load-text">åŠ è½½æ›´å¤š...</text>
    </view>

    <!-- End Message -->
    <view wx:if="{{!hasMore && posts.length > 0}}" class="end-message">
      <text class="end-text">~ å·²ç»åˆ°åº•äº† ~</text>
    </view>
  </view>

  <!-- Floating Upload Button -->
  <view class="fab-button" bindtap="onUploadTap">
    <text class="plus-icon">â•</text>
  </view>

  <!-- Login Modal -->
  <login-modal wx:if="{{showLoginModal}}" bind:close="onLoginClose" />
</view>